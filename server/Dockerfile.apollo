FROM node:16-alpine

WORKDIR "/synapse/src"

COPY ./package.json ./

RUN yarn install

COPY ./ ./

RUN npm run build:mesh

EXPOSE 6868

CMD ["npm", "run", "start-apollo"]