(this["webpackJsonpcreate-react-app"]=this["webpackJsonpcreate-react-app"]||[]).push([[0],{496:function(e,t,n){"use strict";n.r(t);var a,r=n(0),o=n.n(r),i=n(59),s=n.n(i),c=n(43),l=n(552),u=n(564),d=n(8),h=n(3),j=n(23),m=n(24),b=n(7),p=n(303),g=n(565),O=n(570),f=n(574),x=n(573),y=n(179),v=n(571),w=n(572),S=n(563),D=n(21),C=n.n(D),L=n(31),k=n(47),M=n(95),A=n.n(M),I={createConfig:function(e,t){return A.a.post("api/config",{sources:t}).then((function(e){return e.status}))},getTimeData:function(e,t,n){var a=arguments;return Object(L.a)(C.a.mark((function r(){var o,i,s,c;return C.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return o=a.length>3&&void 0!==a[3]?a[3]:5,i=n?"?since=".concat(n):"?minutes=".concat(o),s="frontend"===t?"queries":"resolvers",r.next=5,A.a.get("api/monitor/".concat(s).concat(i),{headers:{authorization:"bearer ".concat(e)}});case 5:return c=r.sent,r.abrupt("return",c);case 7:case"end":return r.stop()}}),r)})))()},getQueryErrorData:function(e){var t=arguments;return Object(L.a)(C.a.mark((function n(){var a,r,o;return C.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return a=t.length>1&&void 0!==t[1]?t[1]:24,r="?hours=".concat(a),n.next=4,A.a.get("api/monitor/errors".concat(r),{headers:{authorization:"bearer ".concat(e)}});case 4:return o=n.sent,n.abrupt("return",o);case 6:case"end":return n.stop()}}),n)})))()},signupUser:function(e){return Object(L.a)(C.a.mark((function t(){var n;return C.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,A.a.post("api/users",e);case 3:return n=t.sent,t.abrupt("return",n.data);case 7:return t.prev=7,t.t0=t.catch(0),t.abrupt("return",{error:"All fields are required and must use unique username"});case 10:case"end":return t.stop()}}),t,null,[[0,7]])})))()},loginUser:function(e){return Object(L.a)(C.a.mark((function t(){var n;return C.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,A.a.post("api/users/login",e);case 3:return n=t.sent,t.abrupt("return",n.data);case 7:return t.prev=7,t.t0=t.catch(0),t.abrupt("return",{error:"Username/password combination failed. Please try again."});case 10:case"end":return t.stop()}}),t,null,[[0,7]])})))()},getAllUsers:function(){return Object(L.a)(C.a.mark((function e(){var t;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,A.a.get("api/users");case 3:return t=e.sent,e.abrupt("return",t.data);case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",{error:"All fields are required and must use unique username"});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))()},deleteUser:function(e){return Object(L.a)(C.a.mark((function t(){var n;return C.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,A.a.delete("api/users",{data:e});case 3:return n=t.sent,t.abrupt("return",n);case 7:return t.prev=7,t.t0=t.catch(0),t.abrupt("return",{error:"All fields are required and must use unique username"});case 10:case"end":return t.stop()}}),t,null,[[0,7]])})))()}},T=I,G=n(93),F=n(577),N=n(578),P=n(575),Q=n(566),q=n(576),W=n(171),U=n(1),E=G.b.div(a||(a=Object(k.a)(["\n  padding: 1rem;\n  ","\n  display: block;\n  ","\n  overflow: auto;\n  .table {\n    border: 1px solid black;\n    background-color: black;\n    grid-gap: 1px;\n    .cell,\n    .header {\n      padding: 0.5rem;\n      background-color: white;\n      .resizer {\n        right: 0;\n        background: blue;\n        width: 10px;\n        height: 100%;\n        position: absolute;\n        top: 0;\n        z-index: 1;\n        ","\n        touch-action :none;\n  \n        &.isResizing {\n          background: red;\n        }\n      }\n    }\n  }\n"])),"","","");function R(e){var t=e.columns,n=e.data,a=Object(W.useTable)({columns:t,data:n},W.useResizeColumns,W.useGridLayout),r=a.getTableProps,o=a.headerGroups,i=a.rows,s=a.prepareRow;return Object(U.jsxs)("div",Object(j.a)(Object(j.a)({},r()),{},{className:"table",children:[o.map((function(e){return e.headers.map((function(e){return Object(U.jsxs)("div",Object(j.a)(Object(j.a)({},e.getHeaderProps()),{},{className:"cell header",children:[e.render("Header"),e.canResize&&Object(U.jsx)("div",Object(j.a)(Object(j.a)({},e.getResizerProps()),{},{className:"resizer ".concat(e.isResizing?"isResizing":"")}))]}),e.id)}))})),i.map((function(e){return s(e)||e.cells.map((function(e){return Object(U.jsx)("div",Object(j.a)(Object(j.a)({},e.getCellProps()),{},{className:"cell",children:e.render("Cell")}))}))}))]}))}var z=function(e){var t=e.loggedInUser,n=Object(r.useState)([]),a=Object(d.a)(n,2),i=a[0],s=a[1],c=Object(r.useState)(24),l=Object(d.a)(c,2),u=l[0],h=l[1];Object(r.useEffect)(Object(L.a)(C.a.mark((function e(){var n,a;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.getQueryErrorData(t,24);case 2:n=e.sent,a=n.data.map((function(e){return{id:e._id,timeOfError:"".concat(new Date(e.createdAt).toDateString()," ").concat(new Date(e.createdAt).toLocaleTimeString()),ip:e.ip,errStrings:e.errs.map((function(e){return e.message})).join(", "),sourceQuery:e.sourceQuery}})).reverse(),s(a);case 5:case"end":return e.stop()}}),e)}))),[]);var j=function(){var e=Object(L.a)(C.a.mark((function e(n){var a,r;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),e.next=3,T.getQueryErrorData(t,u);case 3:a=e.sent,r=a.data.map((function(e){return{id:e._id,timeOfError:"".concat(new Date(e.createdAt).toDateString()," ").concat(new Date(e.createdAt).toLocaleTimeString()),ip:e.ip,errStrings:e.errs.map((function(e){return e.message})).join(", "),sourceQuery:e.sourceQuery}})).reverse(),s(r);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),b=o.a.useMemo((function(){return[{accessor:"timeOfError",Header:"Datetime of Error",width:250},{accessor:"ip",Header:"Origin",width:150},{accessor:"errStrings",Header:"List Of Errors"},{accessor:"sourceQuery",Header:"Original Query"}]}),[]);return t?Object(U.jsxs)(O.a,{sx:{display:"flex",flexWrap:"wrap",flexDirection:"column",margin:"20px"},children:[Object(U.jsxs)(P.a,{children:[Object(U.jsx)(q.a,{name:"hours",margin:"dense",value:u,onChange:function(e){return h(e.target.value)},inputProps:{inputMode:"numeric",pattern:"[0-9]*"},endAdornment:Object(U.jsx)(F.a,{position:"end",children:"hours ago"})}),Object(U.jsx)(N.a,{id:"hours-since-helper-text",children:"Filter Errors By Hours Since"})]}),Object(U.jsx)(Q.a,{variant:"contained",onClick:j,children:"Filter by hour range"}),Object(U.jsx)(E,{children:Object(U.jsx)(R,{columns:b,data:i})})]}):Object(U.jsx)(m.a,{to:"/signin"})},Y=n(579),B=n(540),H=n(543),_=n(276),V=n.n(_),J=n(277),K=n.n(J),X=n(274),Z=n.n(X),$=n(278),ee=n.n($),te=n(275),ne=n.n(te),ae={color:"inherit",textDecoration:"none"},re="",oe="datasources",ie="apollo",se="documentation",ce="errors",le=function(e){e.isAdmin;var t=Object(m.f)();return Object(U.jsxs)("div",{children:[Object(U.jsx)(c.b,{style:ae,to:"/".concat(re),children:Object(U.jsxs)(Y.a,{selected:t.pathname==="/".concat(re),children:[Object(U.jsx)(B.a,{children:Object(U.jsx)(Z.a,{})}),Object(U.jsx)(H.a,{primary:"Dashboard"})]})}),Object(U.jsx)(c.b,{style:ae,to:"/".concat(oe),children:Object(U.jsxs)(Y.a,{selected:t.pathname==="/".concat(oe),children:[Object(U.jsx)(B.a,{children:Object(U.jsx)(ne.a,{})}),Object(U.jsx)(H.a,{primary:"Data Sources"})]})}),Object(U.jsx)(c.b,{style:ae,to:"/".concat(ce),children:Object(U.jsxs)(Y.a,{selected:t.pathname==="/".concat(ce),children:[Object(U.jsx)(B.a,{children:Object(U.jsx)(V.a,{})}),Object(U.jsx)(H.a,{primary:"Errors"})]})}),Object(U.jsx)("a",{style:ae,href:"http://localhost:6868",target:"_blank",children:Object(U.jsxs)(Y.a,{selected:t.pathname==="/".concat(ie),children:[Object(U.jsx)(B.a,{children:Object(U.jsx)(K.a,{})}),Object(U.jsx)(H.a,{primary:"GraphiQL"})]})}),Object(U.jsx)(c.b,{style:ae,to:"/".concat(se),children:Object(U.jsxs)(Y.a,{selected:t.pathname==="/".concat(se),children:[Object(U.jsx)(B.a,{children:Object(U.jsx)(ee.a,{})}),Object(U.jsx)(H.a,{primary:"Documentation"})]})})]})},ue=n(580),de=n(568),he=n(584),je=function(e){var t=e.groupName,n=e.selection,a=e.onChange,r=e.options;return Object(U.jsx)(de.a,{value:n,onChange:a,fullWidth:!0,sx:{minHeight:65},exclusive:!0,children:r.map((function(e,a){return Object(U.jsx)(he.a,{value:e,"aria-label":t,fullWidth:!0,color:"primary",disabled:n===e,children:e},a)}))})},me=n(14),be=n(62),pe=n.n(be),ge=n(50),Oe=n(544),fe=n(545),xe=n(140),ye=n(549),ve=n(293),we=n(294),Se=n(142),De=n(305);var Ce=function(e){return Object(U.jsx)(y.a,{component:"h2",variant:"h6",color:"primary",gutterBottom:!0,children:e.children})},Le=function(e,t,n){return e.filter((function(e){var a=Array.isArray(e[t])?e[t].some((function(e){return n.includes(e)})):n.includes(e[t]);return n.includes("all")||a}))};function ke(e){var t=e.timeScaleProps,n=e.data,a=Object(ge.a)(),r=function(e,t){for(var n={},a=t.unixStart;a<=Math.round((new Date).getTime()/1e3);a+=t.divisionInterval)e.push({unixTime:pe()(pe.a.unix(a),t.timeConversion).unix(),latency:0,count:0,fake:!0});return e.forEach((function(e){var a=pe.a.unix(e.unixTime).format(t.timeFormat);if(n.hasOwnProperty(a))return e.fake&&(n[a].tick=!0),n[a].push(e);n[a]=[e]})),Object.keys(n).map((function(e){return{unixTime:pe()(pe.a.unix(n[e][0].unixTime).format(t.timeConversion)).unix(),latency:+(n[e].map((function(e){return+e.latency})).reduce((function(e,t){return e+t}))/n[e].length).toFixed(3),count:n[e].filter((function(e){return!e.hasOwnProperty("fake")})).length}})).sort((function(e,t){return e.unixTime-t.unixTime}))}(n,t),o=function(e){var t=e.filter((function(e){return e.tick})).map((function(e){return e.unixTime})).slice();return t.length>10&&(t=t.filter((function(e,t){return t%2===1}))),t}(r);return Object(U.jsxs)(U.Fragment,{children:[Object(U.jsx)(Ce,{children:"Requests & Latency"}),Object(U.jsx)(Oe.a,{height:400,debounce:1,children:Object(U.jsxs)(fe.a,{data:r,margin:{top:16,right:16,bottom:0,left:24},children:[Object(U.jsx)(xe.a,{}),Object(U.jsx)(ye.a,{strokeDasharray:"4 4"}),Object(U.jsx)(ve.a,{dataKey:"unixTime",tickFormatter:function(e){return pe.a.unix(e).format(t.timeFormat)},stroke:a.palette.text.secondary,style:a.typography.body2,scale:"time",type:"number",domain:[function(e){return r[0].unixTime},function(e){return r[r.length-1].unixTime}],interval:"preserveStart",ticks:o,minTickGap:50}),Object(U.jsx)(we.a,{yAxisId:"left",tick:{fontSize:15},tickFormatter:function(e){return"".concat(e,"ms")},allowDecimals:!1}),Object(U.jsx)(we.a,{yAxisId:"right",orientation:"right",tick:{fontSize:15},tickFormatter:function(e){return"".concat(e,"reqs")},allowDecimals:!1}),Object(U.jsx)(Se.a,{labelFormatter:function(e){return pe.a.unix(e).format(t.timeFormat)},formatter:function(e,t){return"Average Latency"===t?["".concat(e.toFixed(0)," ms"),t]:["".concat(e),t]}}),Object(U.jsx)(De.a,{yAxisId:"left",isAnimationActive:!0,type:"monotone",dataKey:"latency",stroke:"#a83260",fillOpacity:.5,strokeWidth:3,dot:!1,name:"Average Latency",activeDot:{r:5},fill:"#a83260",animationEasing:"ease"}),Object(U.jsx)(De.a,{yAxisId:"right",isAnimationActive:!0,type:"monotone",dataKey:"count",strokeWidth:3,fillOpacity:0,dot:!1,name:"Request Count",stroke:a.palette.primary.main,animationEasing:"ease"})]})})]})}var Me=n(586),Ae=n(589),Ie=n(550),Te=n(587),Ge=n(588),Fe=n(585);function Ne(e){return Object(U.jsx)(O.a,{display:"flex",alignItems:"center",children:Object(U.jsxs)(O.a,{minWidth:200,children:[Object(U.jsx)(y.a,{variant:"body2",color:"textSecondary",children:"".concat(Math.round(e.latency)," ms")}),Object(U.jsx)(O.a,{width:"100%",mr:1,children:Object(U.jsx)(Fe.a,Object(j.a)({variant:"determinate"},e))})]})})}function Pe(e){var t=e.data;return t=(t=t.sort((function(e,t){return t.latency-e.latency}))).map((function(e){var t=Object(j.a)({},e);return e.hasOwnProperty("rootFields")&&(t.name=e.rootFields),t})),Object(U.jsxs)(o.a.Fragment,{children:[Object(U.jsx)(Ce,{children:"Slowest Requests"}),Object(U.jsxs)(Me.a,{size:"small",children:[Object(U.jsx)(Te.a,{children:Object(U.jsxs)(Ge.a,{children:[Object(U.jsx)(Ie.a,{children:"Date"}),Object(U.jsx)(Ie.a,{children:"Root Fields"}),Object(U.jsx)(Ie.a,{children:"Latency"}),Object(U.jsx)(Ie.a,{children:"IP Address"}),Object(U.jsx)(Ie.a,{children:"Status"})]})}),Object(U.jsx)(Ae.a,{children:t.map((function(e){return Object(U.jsxs)(Ge.a,{children:[Object(U.jsx)(Ie.a,{children:pe.a.unix(e.unixTime).format("MMM DD, 'YY @ HH:mm:ss")}),Object(U.jsx)(Ie.a,{children:Array.isArray(e.name)?e.name.join(", "):e.name}),Object(U.jsx)(Ie.a,{children:Object(U.jsx)(Ne,{value:100*e.latency/t[0].latency,latency:e.latency})}),Object(U.jsx)(Ie.a,{children:"placeholder"}),Object(U.jsx)(Ie.a,{children:"placeholder"})]},e._id.toString())}))})]})]})}var Qe=n(562),qe=n(591),We=n(555);function Ue(e,t,n){return{fontWeight:-1===t.indexOf(e)?n.typography.fontWeightRegular:n.typography.fontWeightMedium}}function Ee(e){var t=e.filterProps,n=Object(ge.a)(),a=r.useState([]),o=Object(d.a)(a,2),i=o[0],s=o[1];return Object(U.jsx)("div",{children:Object(U.jsxs)(P.a,{fullWidth:!0,sx:{minHeight:65},children:[Object(U.jsx)(Qe.a,{id:"multiple-name-label-".concat(t.label),children:t.label}),Object(U.jsx)(We.a,{labelId:"multiple-name-label-".concat(t.label),id:"multiple-name-".concat(t.label),multiple:!0,value:i,onChange:function(e){var n=e.target.value;n="string"===typeof n?n.split(","):n,!i.includes("all")&&n.includes("all")?n=["all"]:i.includes("all")&&n.length>1&&n.splice(n.indexOf("all"),1),s(n),t.onClick(n)},label:t.label,children:t.options.map((function(e){return Object(U.jsx)(qe.a,{value:e,style:Ue(e,i,n),children:e},e)}))})]})})}var Re=n(592),ze=function(e){var t=e.data,n=e.filter,a=e.subfilter,r=e.timeScaleProps;return Object(U.jsxs)(U.Fragment,{children:[n?Object(U.jsx)(S.a,{item:!0,xs:12,md:6,children:Object(U.jsx)(ue.a,{sx:{p:3},children:Object(U.jsx)(Ee,{filterProps:n})})}):null,a?Object(U.jsx)(S.a,{item:!0,xs:12,children:Object(U.jsx)(ue.a,{sx:{p:3},children:Object(U.jsx)(Ee,{filterProps:a})})}):null,Object(U.jsx)(S.a,{item:!0,xs:12,children:Object(U.jsx)(ue.a,{sx:{p:2,display:"flex",flexDirection:"column"},children:Object(U.jsx)(ke,{data:t,timeScaleProps:r})})}),t.length?Object(U.jsx)(S.a,{item:!0,xs:12,children:Object(U.jsx)(ue.a,{sx:{p:2,display:"flex",flexDirection:"column"},children:Object(U.jsx)(Re.a,{children:Object(U.jsx)(Pe,{data:t.slice(0,10)})})})}):null]})},Ye=function(e){var t=e.data,n=e.timeScaleProps,a=Object(r.useState)("all"),o=Object(d.a)(a,2),i=o[0],s=o[1],c=function(e){var t=["all"];return 0!==e.length&&e[0].hasOwnProperty("rootFields")?(t.push.apply(t,Object(me.a)(new Set(e.map((function(e){return e.rootFields})).flat()))),t):t}(t),l=Le(t,"rootFields",i);return Object(U.jsx)(U.Fragment,{children:Object(U.jsx)(ze,{data:l,filter:{label:"Root Queries",options:c,onClick:s},timeScaleProps:n})})},Be=function(e){var t=e.data,n=e.timeScaleProps,a=Object(r.useState)(["all"]),o=Object(d.a)(a,2),i=o[0],s=o[1],c=Object(r.useState)(["all"]),l=Object(d.a)(c,2),u=l[0],h=l[1],j=["Query","Mutation","Subscription"],m=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],a=["all"];return a.push.apply(a,Object(me.a)(new Set(e.filter((function(e){return!j.includes(e.resolver)&&(!(n.length>0)||(!!n.includes("all")||n.includes(e.resolver)))})).map((function(e){return e[t]})).flat()))),a};!function(e){var t;0!==e.length&&(t=e[0].hasOwnProperty("name")?function(e){var t=e.name.split("."),n=Object(d.a)(t,2);e.resolver=n[0],e.field=n[1]}:function(e){e.resolver="",e.field=""},e.forEach(t))}(t);var b=m(t,"resolver"),p=m(t,"field",i),g=Le(Le(t,"resolver",i),"field",u).filter((function(e){return!j.includes(e.resolver)}));return Object(U.jsx)(U.Fragment,{children:Object(U.jsx)(ze,{data:g,filter:{label:"Resolvers",options:b,onClick:s},subfilter:{label:"Subfields",options:p,onClick:h},timeScaleProps:n})})},He=3600,_e=86400,Ve=604800,Je=2592e3,Ke={timeFormat:"HH:mm",timeConversion:"MMM DD YYYY HH:mm"},Xe={timeFormat:"HH:00",timeConversion:"MMM DD YYYY HH:00"},Ze={timeFormat:"MMM D",timeConversion:"MMM DD YYYY 12:00"},$e={timeFormat:"MMM D",timeConversion:"MMM DD YYYY"},et=function(e){var t=e.currentView,n=e.token,a=Object(r.useState)("hour"),o=Object(d.a)(a,2),i=o[0],s=o[1],c=Object(r.useState)([{name:null,rootFields:null}]),l=Object(d.a)(c,2),u=l[0],h=l[1],m=Math.round((new Date).getTime()/1e3),b={hour:Object(j.a)(Object(j.a)({},Ke),{},{unixStart:m-He,divisionInterval:He/12}),day:Object(j.a)(Object(j.a)({},Xe),{},{unixStart:m-_e,divisionInterval:_e/24}),week:Object(j.a)(Object(j.a)({},Ze),{},{unixStart:m-Ve,divisionInterval:Ve/7}),month:Object(j.a)(Object(j.a)({},$e),{},{unixStart:m-Je,divisionInterval:Je/30})},p=Object(r.useCallback)((function(){T.getTimeData(n,t,b.month.unixStart).then((function(e){h(e.data)}))}),[t]);Object(r.useEffect)((function(){p();var e=setInterval((function(){console.log("updating data..."),p()}),3e5);return function(){return clearInterval(e)}}),[p,t]);var g=function(e,t){return e.filter((function(e){return e.unixTime>=t.unixStart}))}(u,b[i]);return Object(U.jsxs)(U.Fragment,{children:[Object(U.jsx)(S.a,{item:!0,xs:12,md:6,children:Object(U.jsx)(ue.a,{sx:{p:3},children:Object(U.jsx)(je,{groupName:"Time scale toggle",selection:i,onChange:function(e,t){s(t)},options:Object.keys(b)})})}),"Client Requests"===t?Object(U.jsx)(Ye,{data:g,timeScaleProps:b[i]}):Object(U.jsx)(Be,{data:g,timeScaleProps:b[i]})]})},tt=function(e){var t=e.loggedInUser,n=Object(r.useState)("Client Requests"),a=Object(d.a)(n,2),o=a[0],i=a[1];return t?Object(U.jsxs)(U.Fragment,{children:[Object(U.jsx)(S.a,{item:!0,xs:12,children:Object(U.jsx)(ue.a,{sx:{p:3,py:3},children:Object(U.jsx)(je,{groupName:"View toggle",selection:o,onChange:function(e,t){i(t)},options:["Client Requests","API Resolvers"]})})}),Object(U.jsx)(et,{currentView:o,token:t})]}):Object(U.jsx)(m.a,{to:"/signin"})},nt=n(556),at=n(581),rt=function(e){var t=e.sourceList,n=e.setSourceList,a=e.setOpen,o=Object(r.useState)(""),i=Object(d.a)(o,2),s=i[0],c=i[1],l=Object(r.useState)(""),u=Object(d.a)(l,2),h=u[0],j=u[1];return Object(U.jsxs)("div",{children:[Object(U.jsxs)("div",{children:[Object(U.jsx)(at.a,{fullWidth:!0,label:"Source Name",color:"primary",id:"graphql-name","aria-describedby":"graphql-name",name:"graphql-name",value:s,onChange:function(e){return c(e.target.value)},variant:"outlined",sx:{mb:2}}),Object(U.jsx)(at.a,{fullWidth:!0,label:"Source Endpoint URL",color:"primary",id:"graphql-url","aria-describedby":"graphql-url",name:"url",value:h,onChange:function(e){return j(e.target.value)},variant:"outlined",sx:{mb:2}})]}),Object(U.jsx)(Q.a,{variant:"contained",onClick:function(e){e.preventDefault(),n([].concat(Object(me.a)(t),[{name:s,url:h,handler:"graphql",created:(new Date).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})}])),c(""),j(""),a(!1)},children:"Create"})]})},ot=n(296);var it=function(e){var t=e.setFile,n=e.fileTypes;return Object(U.jsx)(ot.a,{onTypeError:function(e){return console.error(e)},handleChange:function(e){t(e)},name:"file",types:n})},st=function(e){var t=e.sourceList,n=e.setSourceList,a=e.setOpen,o=Object(r.useState)(""),i=Object(d.a)(o,2),s=i[0],c=i[1],l=Object(r.useState)(null),u=Object(d.a)(l,2),h=u[0],j=u[1],m=Object(r.useState)(""),b=Object(d.a)(m,2),p=(b[0],b[1],Object(r.useState)("")),g=Object(d.a)(p,2),O=(g[0],g[1],function(){var e=Object(L.a)(C.a.mark((function e(r){var o,i;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.preventDefault(),e.next=3,h.text();case 3:o=e.sent,i=h.type.includes("json")?"json":"yaml",n([].concat(Object(me.a)(t),[{name:s,schemaFileType:i,schemaFileContent:o,handler:"openapi",created:(new Date).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})}])),c(""),j(null),a(!1);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());return Object(U.jsxs)("div",{children:[Object(U.jsxs)("div",{children:[Object(U.jsx)(at.a,{fullWidth:!0,label:"Source Name",color:"primary",id:"openapi-name","aria-describedby":"openapi-name",name:"openapi-name",value:s,onChange:function(e){return c(e.target.value)},variant:"outlined",sx:{mb:2}}),Object(U.jsx)(it,{setFile:j,fileTypes:["x-yaml","json"]})]}),Object(U.jsx)(Q.a,{sx:{mt:2},variant:"contained",onClick:O,children:"Create"})]})},ct=function(e){var t=e.sourceList,n=e.setSourceList,a=e.setOpen,o=Object(r.useState)(""),i=Object(d.a)(o,2),s=i[0],c=i[1],l=Object(r.useState)(""),u=Object(d.a)(l,2),h=u[0],j=u[1];return Object(U.jsxs)("div",{children:[Object(U.jsxs)("div",{children:[Object(U.jsx)(at.a,{fullWidth:!0,label:"Database Name",color:"primary",id:"postgres-name","aria-describedby":"postgres-name",name:"postgres-name",value:s,onChange:function(e){return c(e.target.value)},variant:"outlined",sx:{mb:2}}),Object(U.jsx)(at.a,{fullWidth:!0,label:"Database Connection String",color:"primary",id:"postgres-connection","aria-describedby":"postgres-connection",name:"url",value:h,onChange:function(e){return j(e.target.value)},variant:"outlined",sx:{mb:2}})]}),Object(U.jsx)(Q.a,{variant:"contained",onClick:function(e){e.preventDefault(),n([].concat(Object(me.a)(t),[{name:s,url:h,handler:"postgraphile",created:(new Date).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})}])),c(""),j(""),a(!1)},children:"Create"})]})},lt=function(e){var t=e.sourceList,n=e.setSourceList,a=e.setOpen,o=Object(r.useState)(""),i=Object(d.a)(o,2),s=i[0],c=i[1],l=Object(r.useState)(""),u=Object(d.a)(l,2),h=u[0],j=u[1],m=Object(r.useState)(""),b=Object(d.a)(m,2),p=b[0],g=b[1],O=Object(r.useState)([]),f=Object(d.a)(O,2),x=f[0],v=f[1],w=Object(r.useState)(null),S=Object(d.a)(w,2),D=S[0],k=S[1],M=function(){var e=Object(L.a)(C.a.mark((function e(t){var n;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,D.text();case 3:n=e.sent,v([].concat(Object(me.a)(x),[{name:p,content:n}])),g(""),k(null);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(U.jsxs)("div",{children:[Object(U.jsxs)("div",{children:[Object(U.jsx)(at.a,{fullWidth:!0,label:"Source Name",color:"primary",id:"mongoose-name","aria-describedby":"mongoose-name",name:"mongoose-name",value:s,onChange:function(e){return c(e.target.value)},variant:"outlined",sx:{mb:2}}),Object(U.jsx)(at.a,{fullWidth:!0,label:"Source URL",color:"primary",id:"mongoose-url","aria-describedby":"mongoose-url",name:"url",value:h,onChange:function(e){return j(e.target.value)},variant:"outlined",sx:{mb:2}})]}),Object(U.jsxs)("div",{children:[Object(U.jsx)(y.a,{id:"modal-modal-title",variant:"h6",color:"primary",component:"h2",sx:{mb:2},children:"Model Information"}),Object(U.jsx)(at.a,{fullWidth:!0,label:"Model Name",color:"primary",id:"mongoose-model-name","aria-describedby":"mongoose-model-name",name:"mongoose-model-name",value:p,onChange:function(e){return g(e.target.value)},variant:"outlined",sx:{mb:2}}),Object(U.jsx)(it,{setFile:k,fileTypes:["javascript"]}),Object(U.jsx)(Q.a,{sx:{mb:2,mt:2},variant:"contained",onClick:M,children:"Add Model"})]}),Object(U.jsx)(Q.a,{variant:"contained",onClick:function(e){e.preventDefault(),n([].concat(Object(me.a)(t),[{name:s,url:h,models:x,handler:"mongoose",created:(new Date).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})}])),c(""),j(""),a(!1)},sx:{mb:2},children:"Create"})]})},ut=function(e){var t=e.sourceList,n=e.setSourceList,a=e.setOpen,o=Object(r.useState)(""),i=Object(d.a)(o,2),s=i[0],c=i[1],l=Object(r.useState)(""),u=Object(d.a)(l,2),h=u[0],j=u[1],m=Object(r.useState)([]),b=Object(d.a)(m,2),p=b[0],g=b[1],O=Object(r.useState)(""),f=Object(d.a)(O,2),x=f[0],v=f[1],w=Object(r.useState)(""),S=Object(d.a)(w,2),D=S[0],k=S[1],M=Object(r.useState)(""),A=Object(d.a)(M,2),I=A[0],T=A[1],G=Object(r.useState)(""),F=Object(d.a)(G,2),N=F[0],P=F[1],q=Object(r.useState)(null),W=Object(d.a)(q,2),E=W[0],R=W[1],z=function(){var e=Object(L.a)(C.a.mark((function e(t){var n;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,E.text();case 3:n=e.sent,g([].concat(Object(me.a)(p),[{type:x,field:D,path:I,method:N,responseSchemaContent:n}])),v(""),k(""),T(""),P(""),R(null);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(U.jsxs)("div",{children:[Object(U.jsxs)("div",{children:[Object(U.jsx)(at.a,{fullWidth:!0,label:"Source Name",color:"primary",id:"json-schema-name","aria-describedby":"json-schema-name",name:"json-schema-name",value:s,onChange:function(e){return c(e.target.value)},variant:"outlined",sx:{mb:2}}),Object(U.jsx)(at.a,{fullWidth:!0,label:"Source URL",color:"primary",id:"json-schema-url","aria-describedby":"json-schema-url",name:"url",value:h,onChange:function(e){return j(e.target.value)},variant:"outlined",sx:{mb:2}})]}),Object(U.jsxs)("div",{children:[Object(U.jsx)(y.a,{id:"modal-modal-title",variant:"h6",color:"primary",component:"h2",sx:{mb:2},children:"Operation Information"}),Object(U.jsx)(at.a,{fullWidth:!0,label:"Operation Type",color:"primary",id:"json-schema-operation-type","aria-describedby":"json-schema-operation-type",name:"json-schema-operation-type",value:x,onChange:function(e){return v(e.target.value)},variant:"outlined",sx:{mb:2}}),Object(U.jsx)(at.a,{fullWidth:!0,label:"Operation Field",color:"primary",id:"json-schema-operation-field","aria-describedby":"json-schema-operation-field",name:"json-schema-operation-field",value:D,onChange:function(e){return k(e.target.value)},variant:"outlined",sx:{mb:2}}),Object(U.jsx)(at.a,{fullWidth:!0,label:"Operation Path",color:"primary",id:"json-schema-operation-path","aria-describedby":"json-schema-operation-path",name:"json-schema-operation-path",value:I,onChange:function(e){return T(e.target.value)},variant:"outlined",sx:{mb:2}}),Object(U.jsx)(at.a,{fullWidth:!0,label:"Operation Method",color:"primary",id:"json-schema-operation-method","aria-describedby":"json-schema-operation-method",name:"json-schema-operation-method",value:N,onChange:function(e){return P(e.target.value)},variant:"outlined",sx:{mb:2}}),Object(U.jsx)(it,{setFile:R,fileTypes:["json"]}),Object(U.jsx)(Q.a,{sx:{mb:2,mt:2},variant:"contained",onClick:z,children:"Add Operation"})]}),Object(U.jsx)(Q.a,{variant:"contained",onClick:function(e){e.preventDefault(),n([].concat(Object(me.a)(t),[{name:s,url:h,operations:p,handler:"jsonSchema",created:(new Date).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})}])),c(""),j(""),a(!1)},sx:{mb:2},children:"Create"})]})},dt={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:400,bgcolor:"background.paper",border:"5px solid #1976d2",borderRadius:"5px",boxShadow:24,p:4},ht=function(e,t,n,a){switch(e){case"GraphQL":return Object(U.jsx)(rt,{sourceList:t,setSourceList:n,setOpen:a});case"OpenAPI":return Object(U.jsx)(st,{sourceList:t,setSourceList:n,setOpen:a});case"PostgreSQL":return Object(U.jsx)(ct,{sourceList:t,setSourceList:n,setOpen:a});case"Mongoose":return Object(U.jsx)(lt,{sourceList:t,setSourceList:n,setOpen:a});case"JSON Schema":return Object(U.jsx)(ut,{sourceList:t,setSourceList:n,setOpen:a});default:return"No Handler Selected"}};function jt(e){var t=e.handlerName,n=e.sourceList,a=e.setSourceList,o=r.useState(!1),i=Object(d.a)(o,2),s=i[0],c=i[1];return Object(U.jsxs)("div",{children:[Object(U.jsx)(Q.a,{onClick:function(){return c(!0)},variant:"contained",children:"Add"}),Object(U.jsx)(nt.a,{open:s,onClose:function(){return c(!1)},"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description",children:Object(U.jsxs)(O.a,{sx:dt,children:[Object(U.jsx)(y.a,{id:"modal-modal-title",variant:"h6",color:"primary",component:"h2",sx:{mb:2},children:"Source Information"}),ht(t,n,a,c)]})})]})}function mt(e,t,n,a){return{id:e,name:t,description:n,value:a}}var bt=[mt(0,"GraphQL","Load remote GraphQL Schema","graphql"),mt(1,"OpenAPI","Load remote OpenAPI and Swagger","openapi"),mt(2,"JSON Schema","Load remote JSON Schema","json-schema"),mt(3,"PostgreSQL","Connect to your PostgreSQL DB","postgraphile"),mt(4,"Mongoose","Connect to your MongoDB","mongoose")],pt=function(e){var t=e.sourceList,n=e.setSourceList;return Object(U.jsxs)(U.Fragment,{children:[Object(U.jsx)(Ce,{children:"Connect a data source"}),Object(U.jsxs)(Me.a,{size:"small",children:[Object(U.jsx)(Te.a,{children:Object(U.jsxs)(Ge.a,{children:[Object(U.jsx)(Ie.a,{children:"Connector name"}),Object(U.jsx)(Ie.a,{children:"Description"}),Object(U.jsx)(Ie.a,{align:"right",children:"Actions"})]})}),Object(U.jsx)(Ae.a,{children:bt.map((function(e){return Object(U.jsxs)(Ge.a,{children:[Object(U.jsx)(Ie.a,{children:e.name}),Object(U.jsx)(Ie.a,{children:e.description}),Object(U.jsx)(Ie.a,{align:"right",children:Object(U.jsx)(jt,{handlerName:e.name,sourceList:t,setSourceList:n})})]},e.id)}))})]})]})},gt=n(560),Ot=function(e){var t=e.sourcelist,n=e.sourcename,a=e.setSourceList;e.handleAlert;return Object(U.jsx)(U.Fragment,{children:Object(U.jsx)(Q.a,{sourceList:t,sourceName:n,onClick:function(){var e=t.filter((function(e){return e.name!==n}));a(Object(me.a)(e))},children:"\ud83d\uddd1"})})},ft=function(e){var t=e.loggedInUser,n=e.sourceList,a=e.setSourceList,o=Object(r.useState)(null),i=Object(d.a)(o,2),s=i[0],c=i[1],l=Object(r.useState)(null),u=Object(d.a)(l,2),h=u[0],j=u[1],m=n,b=function(e){"success"===e?setTimeout((function(){c(null)}),3500):setTimeout((function(){j(null)}),3500)},p=function(){var e=Object(L.a)(C.a.mark((function e(){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.createConfig(t,m);case 2:200===e.sent?(c("Synapse-mesh has been successfully created!"),b("success")):(j("Failed to create your Synapse-mesh"),b());case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(U.jsxs)(U.Fragment,{children:[" ",s?Object(U.jsx)(gt.a,{sx:{mb:2},onClose:function(){c(null)},severity:"success",variant:"filled",children:s}):Object(U.jsx)(U.Fragment,{}),h?Object(U.jsx)(gt.a,{sx:{mb:2},severity:"error",variant:"filled",onClose:function(){j(null)},children:h}):Object(U.jsx)(U.Fragment,{}),Object(U.jsx)(Ce,{children:"Your connected data sources"}),Object(U.jsxs)(Me.a,{size:"small",children:[Object(U.jsx)(Te.a,{children:Object(U.jsxs)(Ge.a,{children:[Object(U.jsx)(Ie.a,{children:"Source Name"}),Object(U.jsx)(Ie.a,{children:"Connector Type"}),Object(U.jsx)(Ie.a,{align:"center",children:"Status"}),Object(U.jsx)(Ie.a,{children:"Created date"}),Object(U.jsx)(Ie.a,{align:"center",children:"Actions"})]})}),Object(U.jsx)(Ae.a,{children:n.map((function(e){return Object(U.jsxs)(Ge.a,{children:[Object(U.jsx)(Ie.a,{children:e.name}),Object(U.jsx)(Ie.a,{children:e.handler}),Object(U.jsx)(Ie.a,{align:"center",children:"\u2713"}),Object(U.jsx)(Ie.a,{children:e.created}),Object(U.jsx)(Ie.a,{align:"center",children:Object(U.jsx)(Ot,{sourcelist:n,setSourceList:a,sourcename:e.name})})]},e.id)}))})]}),Object(U.jsx)(Q.a,{sx:{width:"40%",mt:2},variant:"contained",onClick:p,children:"Create Your Synapse"})]})},xt=function(e){var t=e.loggedInUser,n=Object(r.useState)([]),a=Object(d.a)(n,2),o=a[0],i=a[1];return t?Object(U.jsxs)(U.Fragment,{children:[Object(U.jsx)(S.a,{item:!0,xs:12,children:o.length>0?Object(U.jsx)(ue.a,{sx:{p:2,display:"flex",flexDirection:"column"},children:Object(U.jsx)(ft,{loggedInUser:t,sourceList:o,setSourceList:i})}):null}),Object(U.jsx)(S.a,{item:!0,xs:12,children:Object(U.jsx)(ue.a,{sx:{p:2,display:"flex",flexDirection:"column"},children:Object(U.jsx)(pt,{sourceList:o,setSourceList:i})})})]}):Object(U.jsx)(m.a,{to:"/signin"})},yt=n(567),vt=n(583),wt=n(559),St=n(582),Dt=n(168),Ct=n.n(Dt);function Lt(e){return Object(U.jsxs)(y.a,Object(j.a)(Object(j.a)({variant:"body2",color:"text.secondary",align:"center"},e),{},{children:["Copyright \xa9 ",Object(U.jsx)(St.a,{color:"inherit",href:"https://mui.com/",children:"Synapse"})," ",(new Date).getFullYear(),"."]}))}var kt=Object(p.a)();function Mt(e){e.setLoggedInUser;var t=e.loggedInUser,n=e.isAdmin,a=e.closeModal,o=e.setUsers,i=e.allUsers,s=Object(r.useState)(null),c=Object(d.a)(s,2),h=c[0],j=c[1],b=Object(r.useState)(null),p=Object(d.a)(b,2),g=p[0],f=p[1],x=Object(r.useState)(!1),v=Object(d.a)(x,2),D=v[0],k=v[1],M=Object(r.useState)(""),A=Object(d.a)(M,2),I=A[0],G=A[1],F=Object(r.useState)(""),N=Object(d.a)(F,2),P=N[0],q=N[1],W=Object(r.useState)(""),E=Object(d.a)(W,2),R=E[0],z=E[1],Y=Object(r.useState)(""),B=Object(d.a)(Y,2),H=B[0],_=B[1],V=function(){var e=Object(L.a)(C.a.mark((function e(t){var n,r,s;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),n=new FormData(t.currentTarget),r={username:n.get("username"),password:n.get("password"),firstName:I,lastName:n.get("lastName"),admin:D?"true":"false"},e.next=5,T.signupUser(r);case 5:(s=e.sent).error?j(s.error):(j(null),J(),f("Successfully created user ".concat(R)),o([].concat(Object(me.a)(i),[s])),setTimeout((function(){a(!1)}),1500));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),J=function(){G(""),q(""),z(""),_(""),k(!1)};return t||n?Object(U.jsx)(u.a,{theme:kt,children:Object(U.jsxs)(w.a,{component:"main",maxWidth:"xs",children:[Object(U.jsx)(l.a,{}),h?Object(U.jsx)(gt.a,{severity:"error",variant:"filled",children:h}):Object(U.jsx)(U.Fragment,{}),g?Object(U.jsx)(gt.a,{severity:"success",variant:"filled",children:g}):Object(U.jsx)(U.Fragment,{}),Object(U.jsxs)(O.a,{sx:{marginTop:8,display:"flex",flexDirection:"column",alignItems:"center"},children:[Object(U.jsx)(yt.a,{sx:{m:1,bgcolor:"secondary.main"},children:Object(U.jsx)(Ct.a,{})}),Object(U.jsx)(y.a,{component:"h1",variant:"h5",children:"Create a User"}),Object(U.jsxs)(O.a,{component:"form",noValidate:!0,onSubmit:V,sx:{mt:3},children:[Object(U.jsxs)(S.a,{container:!0,spacing:2,children:[Object(U.jsx)(S.a,{item:!0,xs:12,sm:6,children:Object(U.jsx)(at.a,{autoComplete:"given-name",name:"firstName",value:I,onChange:function(e){return G(e.target.value)},required:!0,fullWidth:!0,id:"firstName",label:"First Name",autoFocus:!0})}),Object(U.jsx)(S.a,{item:!0,xs:12,sm:6,children:Object(U.jsx)(at.a,{required:!0,fullWidth:!0,value:P,onChange:function(e){return q(e.target.value)},id:"lastName",label:"Last Name",name:"lastName",autoComplete:"family-name"})}),Object(U.jsx)(S.a,{item:!0,xs:12,children:Object(U.jsx)(at.a,{required:!0,fullWidth:!0,value:R,onChange:function(e){return z(e.target.value)},id:"username",label:"Username",name:"username",autoComplete:"username"})}),Object(U.jsx)(S.a,{item:!0,xs:12,children:Object(U.jsx)(at.a,{required:!0,fullWidth:!0,value:H,onChange:function(e){return _(e.target.value)},name:"password",label:"Password",type:"password",id:"password",autoComplete:"new-password"})}),Object(U.jsx)(S.a,{item:!0,xs:12,children:Object(U.jsx)(vt.a,{control:Object(U.jsx)(wt.a,{value:D,checked:D,onChange:function(){return k(!D)},color:"primary"}),label:"Make user an admin"})})]}),Object(U.jsx)(Q.a,{type:"submit",fullWidth:!0,variant:"contained",sx:{mt:3,mb:2},children:"Sign Up"})]})]}),Object(U.jsx)(Lt,{sx:{mt:5}})]})}):Object(U.jsx)(m.a,{to:"/"})}function At(e){return Object(U.jsxs)(y.a,Object(j.a)(Object(j.a)({variant:"body2",color:"text.secondary",align:"center"},e),{},{children:["Copyright \xa9 ",Object(U.jsx)(St.a,{color:"inherit",href:"https://mui.com/",children:"Synapse"})," ",(new Date).getFullYear(),"."]}))}var It=Object(p.a)();function Tt(e){var t=e.loggedInUser,n=e.setLoggedInUser,a=e.setIsAdmin,o=e.setUsername,i=Object(r.useState)(null),s=Object(d.a)(i,2),c=s[0],h=s[1],j=function(){var e=Object(L.a)(C.a.mark((function e(t){var r,i,s;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),r=new FormData(t.currentTarget),i={username:r.get("username"),password:r.get("password")},e.next=5,T.loginUser(i);case 5:(s=e.sent).error?h(s.error):(n(s.token),a(s.admin),o(s.username));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return t?Object(U.jsx)(m.a,{to:"/"}):Object(U.jsx)(u.a,{theme:It,children:Object(U.jsxs)(w.a,{component:"main",maxWidth:"xs",children:[Object(U.jsx)(l.a,{}),c?Object(U.jsx)(gt.a,{severity:"error",variant:"filled",children:c}):Object(U.jsx)(U.Fragment,{}),Object(U.jsxs)(O.a,{sx:{marginTop:8,display:"flex",flexDirection:"column",alignItems:"center"},children:[Object(U.jsx)(yt.a,{sx:{m:1,bgcolor:"secondary.main"},children:Object(U.jsx)(Ct.a,{})}),Object(U.jsx)(y.a,{component:"h1",variant:"h5",children:"Sign in"}),Object(U.jsxs)(O.a,{component:"form",onSubmit:j,noValidate:!0,sx:{mt:1},children:[Object(U.jsx)(at.a,{margin:"normal",required:!0,fullWidth:!0,id:"username",label:"Username",name:"username",autoComplete:"username",autoFocus:!0}),Object(U.jsx)(at.a,{margin:"normal",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",autoComplete:"current-password"}),Object(U.jsx)(Q.a,{type:"submit",fullWidth:!0,variant:"contained",sx:{mt:3,mb:2},children:"Sign In"})]})]}),Object(U.jsx)(At,{sx:{mt:8,mb:4}})]})})}var Gt=n(553),Ft=n(297),Nt=n.n(Ft);var Pt=function(e){var t=e.Drawer,n=e.MainList,a=e.isAdmin,r=e.open,o=e.toggleDrawer;return Object(U.jsx)(U.Fragment,{children:Object(U.jsxs)(t,{variant:"permanent",open:r,children:[Object(U.jsx)(x.a,{sx:{display:"flex",alignItems:"center",justifyContent:"flex-end",px:[1]},children:Object(U.jsx)(v.a,{onClick:o,children:Object(U.jsx)(Nt.a,{})})}),Object(U.jsx)(Gt.a,{}),Object(U.jsx)(n,{isAdmin:a})]})})},Qt=n(298),qt=n.n(Qt);var Wt=function(e){var t=e.toggleDrawer,n=e.open;return Object(U.jsx)(U.Fragment,{children:Object(U.jsx)(v.a,{edge:"start",color:"inherit","aria-label":"open drawer",onClick:t,sx:Object(j.a)({marginRight:"36px"},n&&{display:"none"}),children:Object(U.jsx)(qt.a,{})})})},Ut=n(217);n(299),Object(b.a)(Ie.a)((function(e){var t,n=e.theme;return t={},Object(h.a)(t,"&.".concat(Ut.a.head),{backgroundColor:n.palette.common.black,color:n.palette.common.white}),Object(h.a)(t,"&.".concat(Ut.a.body),{fontSize:14}),t})),Object(b.a)(Ge.a)((function(e){return{"&:nth-of-type(odd)":{backgroundColor:e.theme.palette.action.hover},"&:last-child td, &:last-child th":{border:0}}}));n(210);var Et=n(554),Rt=function(){return Object(U.jsx)(U.Fragment,{children:Object(U.jsx)(S.a,{item:!0,xs:12,children:Object(U.jsxs)(ue.a,{sx:{p:5,display:"flex",flexDirection:"column"},children:[Object(U.jsx)(Ce,{children:"Documentation"}),Object(U.jsx)(Et.a,{children:"\n# [![Synapse-branding-logo](<INSERT IMAGE URL>)][github]\n\n## The Team\n\n**[Jay Gudsson](https://www.linkedin.com/in/gudsson/)** _Software Engineer_ Narnia, Narnia\n\n**[Justin Gustafson](https://www.linkedin.com/in/justin-gustafson-98063945/)** _Software Engineer_ Narnia, Narnia\n\n**[Aneesh Patel](https://www.linkedin.com/in/aneesh-patel-62172b91/)** _Software Engineer_ Narnia, Narnia\n\n**[Dylan Jones](https://www.linkedin.com/in/dylan-jones-053310218/)** _Software Engineer_ Narnia, Narnia\n\n---\n\n## Table of Contents\n\n- [Introduction](#introduction)\n- [Prerequisites](#prerequisites)\n- [Installion](#installation)\n- [Basic Usage](#basic-usage)\n- [Gateway Manager](#gateway-manager)\n- [Query Monitoring](#query-monitoring)\n- [Frontend vs. Backend Buttons](#frontend-vs-backend-buttons)\n- [Viewing Data Options](#viewing-data-options)\n- [Development vs. Production Server](#development-vs-production-server)\n- [Managing Users](#managing-users)\n- [Synapse Configuration](#synapse-configuration)\n- [Adding Data Sources](#adding-data-sources)\n- [Development Flow](#development-flow)\n- [Deployment](#deployment)\n\n---\n\n## Introduction\n\nSynapse was designed to facilitate the efficient creation of a single GraphQL gateway for multiple existing APIs. It does so by providing an intuitive user interface (the Gateway Manager) to set up and configure your gateway in just a few steps. The Synapse Gateway Manager includes monitoring for all queries and mutations made to the Gateway, allowing the developer to view and filter queries by individual resolvers and in addition to view the latency of each query or resolver. Synapse also offers easy deployment, allowing the developer to deploy their created gateway to Amazon Web Services with a single command.\n\n## GraphQL in Front of Your APIs\n\nSynapse does not replace your existing APIs/data sources with GraphQL, but rather creates a single GraphQL schema that stitches your existing sources together. You can think of the Synapse GraphQL Gateway as a separate server sitting in front of your APIs with the ability to request specific information from them to fulfill different queries from the client. From the client\u2019s perspective, the gateway is just a single GraphQL endpoint, but from the backend perspective, the gateway is making requests to all your existing APIs and data sources, enabling it to respond with the requested data. This allows you to use your existing APIs while providing a better client experience. To read more about how Synapse works under the hood and the problems it solves please view our Case Study (INSERT LINK HERE).\n\n---\n\n## Prerequisites\n\nPlease install the following if you do not already have each one installed:\n- [Node.js and NPM](https://nodejs.org/en/download/)\n- [AWS Account](https://portal.aws.amazon.com/billing/signup#/start)\n- [AWS CLI configured locally](https://aws.amazon.com/cli/)\n- [Docker](https://docs.docker.com/get-docker/)\n\n## Installation\n\n1. To clone the Synapse repository and set up the Gateway Manager run the following command: `<INSERT COMMAND>`\n2. After running the above command, you will be prompted to input information for establishing a root user for the Gateway Manager\n    - By default, the root user will have admin privileges and be able to create and manage users when your gateway is deployed (via AWS Copilot)\n    - In development, only the root account can be used for configuring and monitoring your GraphQL gateway\n3. Once the repository has been set up on your local environment, from within the `server` directory, start up MongoDB with following command: `<INSERT COMMAND>`\n    - This will run MongoDB on your local environment (via Docker container) and be used during development\n4. After MongoDB is successfully up and running, launch the Gateway Manager with the following command: `<INSERT COMMAND>`\n    - You can read more about the Gateway Manager in the Gateway Manager section below\n\n## Basic Usage\n\n1. Once the Gateway Manager is successfully up and running, visit `localhost:4005` to login and start configuring your GraphQL gateway\n    - Log in with the root account created during the installation process\n2. Within the Data Sources tab, you can select, configure, and add all required data sources to be combined within your gateway\n    - For more information on how to add specific sources and what sources are available please see the Adding Data Sources section on the docs\n3. After you have added all your required data sources, configure and generate your GraphQL gateway by clicking on the \u201cCreate Your Synapse\u201d button\n    - Synapse will generate a default GraphQL schema for all your added data sources which can be customized by altering the `.meshrc` file located in the `server` directory. Once altered, run the following command: `<INSERT COMMAND>`. Synapse is powered by GraphQL Mesh under the hood, for more information on customizing your gateway, please visit the [GraphQL Mesh Docs](https://www.graphql-mesh.com/docs/getting-started/introduction).\n4. To launch and test your gateway run the following command: `<INSERT COMMAND>`\n5. Once the gateway server is running, you can visit `localhost:5000` to interact with a GraphiQL playground to test out your GraphQL API Gateway\n    - All queries and mutations made to the server will be recorded in your local MongoDB and can be viewed on the Gateway Manager. Note, this data will be reset once you\u2019ve deployed your server to AWS\n6. Deploy your Synapse GraphQL Gateway to AWS by running the following command: `<INSERT COMMAND>`\n    - Amazon CLI must be downloaded and configured\n    - For more information about deployment, read the Deployment section below\n\n---\n\n## Gateway Manager\n\nAt its core, The Gateway Manager is an interface to manage the Synapse GraphQL Gateway. In development, the root user will be able to login and add data sources (API endpoints) to configure the gateway from the Data Sources menu tab. Once the data sources have been added, the user clicks on the \u201cCreate Your Synapse\u201d button and Synapse automatically creates a unified, stitched GraphQL schema for all of the added data sources.\n\nSynapse will also configure a GraphQL server that implements the generated schema automatically so that the user only needs to run a single command to start testing out their new GraphQL gateway. Every query and mutation made to this GraphQL gateway is then recorded and can be viewed from the Metrics & Logs menu tab in the Gateway Manager.\n\n## Query Monitoring\n\nThe user has many choices for how they would like to view and monitor their gateway data. This can be done from the dropdown menu at the top of the monitoring page.\n\n## Frontend vs. Backend Buttons\n\n(INSERT DIFFERENCES)\n\n## Viewing Data Options\n\n- Choose a time frame to view all of the queries or mutations\n- View data on root queries\n- View data on specific resolvers\n- View top ten queries with the highest latency\n\n## Development vs. Production Server\n\nThere are two versions of the Gateway Manager, one for development and the other for production. There are some key distinctions between the two as explained below. \n\n## Managing Users\n\nIn development, only the root user is able to log in and no user accounts can be created. Therefore, this version does not have a user management tab. In the production version, however, root/admin users are able to view a \u201cManage Users\u201d tab which will allow them to create and delete additional users. When creating a user, the admin is able to specify whether the new user will be an admin or not. The difference between an admin and non-admin user is that users with admin privileges are the only ones able to add and manage users in production but all users are able to view metrics/logs in production. \n\n## Synapse Configuration\n\nThe other key distinction between the production and development Gateway Manager is that the Synapse GraphQL Server can only be configured in development. Once in production, the Gateway Manager no longer shows the Data Sources tab and loses the functionality of adding/deleting data sources from the gateway. Only the original root user is able to configure and modify the gateway in development before it is deployed\n\n## Adding Data Sources\n\nSynapse allows the user to add any number of data sources and a variety of API types, currently supporting GraphQL, REST, MongoDB, PostgresQL, and JSON Schema data sources. Depending on the data source, Synapse will prompt you to either type in a URL pointing to the data source (GraphQL, PostgreSQL) or ask you to upload a yaml file with the specification for that data source (OAS specification for REST). Synapse allows you to delete any data sources you\u2019ve added (in development) and then provides a button to \u201cCreate Your Synapse\u201d. Once a user clicks that button, Synapse will automatically configure and create the GraphQL Gateway. The user then only needs to run a single command to start the Gateway Server which is powered by GraphQL Mesh.\n\nAfter the user has added all their data sources, Synapse uses GraphQL Mesh to create a default unified schema for the gateway server. Users can view this unified schema by looking in the .mesh directory that is generated when the gateway is created. If a user would like to further customize the schema and add additional features, they are able to easily do so manually by following the open-source [GraphQL Mesh documentation](https://www.graphql-mesh.com/docs/getting-started/introduction). Additionally, since Synapse uses Apollo to create the gateway server, users are able to take advantage of Apollo-specific features to customize their Apollo server even further.\n\n## Development Flow\n\nAfter the repository has been set up locally, the user will have a development Gateway Manager server, as well as a `docker-compose` file for starting MongoDB locally within the `server` directory.\n\nFirst the user can start running MongoDB locally by running the command `docker-compose up` while in the `server` directory. After MongoDB is up and running, the user can start the Gateway Manager server by running the command `npm run start-gui`. The Gateway Manager will be running on port 4005 by default. \n\nThe user can then visit `http://localhost:4005` and login with the root account they created upon downloading and setting up the Synapse repository. Once logged in, the user can click on the Data Sources tab, add all their data sources and then create their Synapse gateway. The user is now ready to test out the gateway server. \n\nThe gateway server can be run locally by running the command `npm run start-apollo`. The gateway server will run on port 5000 by default. Navigating to `http://localhost:5000` will direct the user to a GraphiQL playground where they are able to test out their server with different queries and mutations. If the user wants to make any changes to the gateway or add further customization at this point, they can stop the gateway server on port 5000 and make the necessary changes, either through the Gateway Manager or manually in the repository. The user can then relaunch the server by running the same command, `npm run start-apollo` for further testing. Once the user is satisfied with their gateway, they can deploy their gateway and a production Gateway Manager easily. \n\n## Deployment\n\nTo start, stop both the Gateway server running on port 5000 and the Gateway Manager server running on port 4005. Then, stop the MongoDB container by running the command `docker-compose down`. It is important at this point to make sure the user has the AWS CLI installed and configured on their local machine. Afterwards, the user can run the command (INSERT DEPLOYMENT COMMAND) and a production Gateway Manager server and the Synapse GraphQL Gateway will be spun up on AWS and connected to MongoDB. \n\nThe deployment happens through the use of AWS CoPilot, which will create and register containers for MongoDB, the production Gateway Manager, and the Synapse GraphQL Gateway onto AWS ECR and then spin them up on AWS ECS. \n\n---\n"})]})})})},zt=Object(b.a)(f.a,{shouldForwardProp:function(e){return"open"!==e}})((function(e){var t=e.theme,n=e.open;return Object(j.a)({zIndex:t.zIndex.drawer+1,transition:t.transitions.create(["width","margin"],{easing:t.transitions.easing.sharp,duration:t.transitions.duration.leavingScreen})},n&&{marginLeft:240,width:"calc(100% - ".concat(240,"px)"),transition:t.transitions.create(["width","margin"],{easing:t.transitions.easing.sharp,duration:t.transitions.duration.enteringScreen})})})),Yt=Object(b.a)(g.a,{shouldForwardProp:function(e){return"open"!==e}})((function(e){var t=e.theme,n=e.open;return{"& .MuiDrawer-paper":Object(j.a)({position:"relative",whiteSpace:"nowrap",width:240,transition:t.transitions.create("width",{easing:t.transitions.easing.sharp,duration:t.transitions.duration.enteringScreen}),boxSizing:"border-box"},!n&&Object(h.a)({overflowX:"hidden",transition:t.transitions.create("width",{easing:t.transitions.easing.sharp,duration:t.transitions.duration.leavingScreen}),width:t.spacing(7)},t.breakpoints.up("sm"),{width:t.spacing(9)}))}})),Bt=Object(p.a)(),Ht=function(){var e=o.a.useState(!0),t=Object(d.a)(e,2),n=t[0],a=t[1],i=Object(r.useState)(null),s=Object(d.a)(i,2),c=s[0],h=s[1],j=Object(r.useState)(!1),b=Object(d.a)(j,2),p=b[0],g=b[1],f=Object(r.useState)(""),D=Object(d.a)(f,2),C=D[0],L=D[1],k=function(){a(!n)};return Object(U.jsx)(u.a,{theme:Bt,children:Object(U.jsxs)(O.a,{sx:{display:"flex"},children:[Object(U.jsx)(l.a,{}),Object(U.jsx)(zt,{position:"absolute",open:!!c&&n,children:Object(U.jsxs)(x.a,{sx:{pr:"24px"},children:[c?Object(U.jsx)(Wt,{toggleDrawer:k,open:n}):null,Object(U.jsx)(y.a,{component:"h1",variant:"h6",color:"inherit",noWrap:!0,sx:{flexGrow:1},children:"Synapse Gateway Manager"}),Object(U.jsx)(v.a,{color:"inherit",onClick:function(e){e.preventDefault(),c&&(h(null),g(!1))},children:c?Object(U.jsxs)(y.a,{children:["Hi ",C," | Logout"]}):""})]})}),c?Object(U.jsx)(Pt,{Test:le,Drawer:Yt,MainList:le,isAdmin:p,open:n,toggleDrawer:k}):null,Object(U.jsxs)(O.a,{component:"main",sx:{backgroundColor:function(e){return"light"===e.palette.mode?e.palette.grey[100]:e.palette.grey[900]},flexGrow:1,height:"100vh",overflow:"auto"},children:[Object(U.jsx)(x.a,{}),Object(U.jsx)(w.a,{maxWidth:"lg",sx:{mt:4,mb:4},children:Object(U.jsx)(S.a,{container:!0,spacing:3,children:Object(U.jsxs)(m.d,{children:[Object(U.jsx)(m.b,{path:"/",element:Object(U.jsx)(tt,{loggedInUser:c})}),Object(U.jsx)(m.b,{path:"/datasources",element:Object(U.jsx)(xt,{loggedInUser:c})}),Object(U.jsx)(m.b,{path:"/createuser",element:Object(U.jsx)(Mt,{setLoggedInUser:h,loggedInUser:c,isAdmin:p})}),Object(U.jsx)(m.b,{path:"/signin",element:Object(U.jsx)(Tt,{setUsername:L,setIsAdmin:g,setLoggedInUser:h,loggedInUser:c})}),Object(U.jsx)(m.b,{path:"/documentation",element:Object(U.jsx)(Rt,{})}),Object(U.jsx)(m.b,{path:"/errors",element:Object(U.jsx)(z,{loggedInUser:c})}),Object(U.jsx)(m.b,{path:"*",element:Object(U.jsx)(m.a,{to:"/signin"})})]})})})]})]})})};function _t(){return Object(U.jsx)("div",{children:Object(U.jsx)(Ht,{})})}var Vt=n(107),Jt=Object(p.a)({palette:{primary:{main:"#556cd6"},secondary:{main:"#19857b"},error:{main:Vt.a.A400}}});s.a.render(Object(U.jsxs)(u.a,{theme:Jt,children:[Object(U.jsx)(l.a,{}),Object(U.jsx)(c.a,{children:Object(U.jsx)(_t,{})})]}),document.querySelector("#root"))}},[[496,1,2]]]);
//# sourceMappingURL=main.d724ff04.chunk.js.map